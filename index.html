<!DOCTYPE html>
<html lang="lb">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>P1 – Spiller</title>

<style>
@font-face{
  font-family:'Schoulschrëft';
  src:url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
  font-weight:bold; font-style:normal; font-display:swap;
}

:root{
  --pink-mid:#e4b7d0;
  --pink-light:#f6e4ee;
  --pink-dark:#d88cb8;

  --ink:#1f1f1f;
  --white:#fff;
  --bad:#ffcccc;
  --ok:#b7f0c8;

  /* compact sizing */
  --border:3px;
  --shadow:0 10px 24px rgba(0,0,0,.08);
  --pad:clamp(10px,2.2vw,16px);
  --r:18px;
}

*{box-sizing:border-box; -webkit-tap-highlight-color:transparent; user-select:none; outline:none;}
html,body{
  height:100%; margin:0;
  background:linear-gradient(135deg,var(--pink-mid),var(--pink-light));
  color:var(--ink);
  font-family:'Schoulschrëft', Arial, sans-serif;
}

.hidden{display:none!important;}

/* ===== top nav ===== */
.top{
  position:sticky; top:8px; z-index:10;
  display:flex; gap:10px; justify-content:center; align-items:center;
  background:var(--white);
  border:var(--border) solid var(--pink-dark);
  border-radius:16px;
  padding:.28rem .7rem;
  margin:10px auto;
  width:fit-content;
  box-shadow:var(--shadow);
}
.iconBtn{
  border:var(--border) solid var(--ink);
  background:var(--white);
  padding:.2rem .55rem;
  border-radius:12px;
  cursor:pointer;
  font-size:1.25rem;
  line-height:1;
  min-width:2.35rem;
  display:grid;
  place-items:center;
  font-family:'Schoulschrëft', Arial, sans-serif;
}
.iconBtn:active{transform:scale(.98);}
#flowLabel{font-size:1.05rem; opacity:.9;}

/* ===== sections ===== */
.wrap{
  min-height:calc(100vh - 70px);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:1.1rem;
  padding:var(--pad);
}
h1{
  margin:.2rem 0;
  text-align:center;
  font-size:clamp(1.6rem,3.8vw,2.6rem);
}

/* ===== game 1 grid: force 2 rows on desktop ===== */
.grid{
  width:min(980px,96vw);
  display:grid;
  gap:clamp(.55rem,1.6vw,1rem);
  grid-template-columns:repeat(8, minmax(0,1fr)); /* 2 rows for ~15 items */
}
@media (max-width:860px){
  .grid{grid-template-columns:repeat(6, minmax(0,1fr));}
}
@media (max-width:520px){
  .grid{grid-template-columns:repeat(4, minmax(0,1fr));}
}

.imgToken{
  background:var(--white);
  border:5px solid var(--pink-mid);
  border-radius:18px;
  aspect-ratio:1/1;
  display:grid;
  place-items:center;
  cursor:pointer;
  box-shadow:var(--shadow);
  transition:transform .08s ease;
}
.imgToken:active{transform:scale(.97);}
.imgToken img{width:82%; height:82%; object-fit:contain;}

.flash-good{background:var(--ok)!important; border-color:var(--ok)!important;}
.flash-bad{background:var(--bad)!important; border-color:var(--bad)!important;}

.btn{
  border:var(--border) solid var(--ink);
  background:var(--white);
  border-radius:14px;
  padding:.4rem .85rem;
  cursor:pointer;
  font-family:'Schoulschrëft', Arial, sans-serif;
  font-size:1.05rem;
  box-shadow:var(--shadow);
}
.btn:active{transform:scale(.98);}

/* ===== big picture ===== */
.bigSquare{
  width:min(42vmin,360px,85vw);
  aspect-ratio:1/1;
  background:var(--white);
  border:8px solid var(--pink-mid);
  border-radius:26px;
  display:grid;
  place-items:center;
  position:relative;
  box-shadow:var(--shadow);
  cursor:pointer;
  transition:transform .1s ease;
}
.bigSquare:active{transform:scale(.98);}
.bigSquare img{width:72%; height:72%; object-fit:contain;}

.reset{
  position:absolute;
  top:10px;
  right:12px;
  width:42px;
  height:42px;
  border-radius:50%;
  background:#fff;
  border:4px solid var(--pink-mid);
  display:grid;
  place-items:center;
  font-size:1.25rem;
  cursor:pointer;
}
.fade{animation:fadeIn .25s ease;}
@keyframes fadeIn{from{opacity:0; transform:scale(.92)} to{opacity:1; transform:scale(1)}}

/* ===== memory ===== */
.memGrid{
  width:min(980px,96vw);
  display:grid;
  gap:clamp(.6rem,1.8vw,1rem);
  grid-template-columns:repeat(4, minmax(0, 1fr));
}
@media (max-width:780px){ .memGrid{grid-template-columns:repeat(3,1fr);} }
@media (max-width:520px){ .memGrid{grid-template-columns:repeat(2,1fr);} }

.card{aspect-ratio:5/3; perspective:1000px; cursor:pointer;}
.inner{position:relative; width:100%; height:100%; transform-style:preserve-3d; transition:transform .28s ease;}
.flipped .inner{transform:rotateY(180deg);}
.face{
  position:absolute; inset:0;
  border-radius:16px;
  border:5px solid var(--pink-mid);
  background:#fff;
  display:grid;
  place-items:center;
  backface-visibility:hidden;
  box-shadow:var(--shadow);
}
.front{
  background:#fff url('https://i.postimg.cc/ZKkYXy7g/cardback-p1-game.png') center/68% no-repeat;
}
.back{transform:rotateY(180deg);}
.memWord{
  font-size:clamp(1.25rem,3.3vmin,1.8rem);
  text-align:center;
  padding:.4rem;
  line-height:1.15;
}

/* ===== game 4: "Dat ass ..." ===== */
.sentence{
  display:flex;
  align-items:center;
  gap:min(2.2vmin,16px);
  flex-wrap:wrap;
  justify-content:center;
  font-size:clamp(2rem,4.8vw,3.2rem);
}
.inlineSq{
  display:inline-grid;
  place-items:center;
  width:min(36vmin,420px);
  aspect-ratio:1/1;
  border:8px solid var(--pink-mid);
  border-radius:24px;
  background:#fff;
  cursor:pointer;
  box-shadow:var(--shadow);
  transition:transform .1s ease;
}
.inlineSq:active{transform:scale(.98);}
</style>
</head>

<body>

<div class="top">
  <button class="iconBtn" id="prev" aria-label="virdrun">◀</button>
  <span id="flowLabel">1. Spill</span>
  <button class="iconBtn" id="next" aria-label="nächst">▶</button>
</div>

<!-- GAME 1 -->
<section class="wrap" id="g1">
  <h1>Lauschter a klick</h1>
  <div class="grid" id="grid1"></div>
  <button class="btn" id="play1">Toun nach eng Kéier</button>
</section>

<!-- GAME 2 -->
<section class="wrap hidden" id="g2">
  <h1>Memory</h1>
  <div class="memGrid" id="memGrid"></div>
  <button class="btn" id="memReset">↻ Reset</button>
</section>

<!-- GAME 3 -->
<section class="wrap hidden" id="g3">
  <h1>Kuck d'Bild a so wat et ass</h1>
  <div class="bigSquare" id="bigSq" title="Klick fir en neit Bild">
    <img id="bigImg" alt="">
    <button class="reset" id="bigReset" title="Nei ufänken">↻</button>
  </div>
  <button class="btn" id="sayPlay">Toun spillen</button>
</section>

<!-- GAME 4 -->
<section class="wrap hidden" id="g4">
  <h1>Dat ass …</h1>
  <div class="sentence">
    <span>Dat ass</span>
    <div class="inlineSq" id="nounSq">
      <img id="nounImg" alt="" style="width:80%;height:80%;object-fit:contain">
    </div>
  </div>
  <button class="btn" id="nounPlay">Toun spillen</button>
</section>

<audio id="speaker" preload="auto"></audio>

<script>
<script>
/* ================= DATA (P1 – FAMILL) ================= */
const AUDIO_BASE = "https://github.com/albrechtclaire1007/p1famill/raw/refs/heads/main/";

const ITEMS = [
  { id:'bom',      word:'meng Bom',      img:'https://i.postimg.cc/rKGTh8W7/Bom.png',       audio:'p1_bom.mp3' },
  { id:'bop',      word:'mäi Bop',       img:'https://i.postimg.cc/75xkdpMp/Bop.png',       audio:'p1_bop.mp3' },
  { id:'brudder',  word:'mäi Brudder',   img:'https://i.postimg.cc/sMVrqt4F/Brudder.png',   audio:'p1_brudder.mp3' },
  { id:'mamm',     word:'meng Mamm',     img:'https://i.postimg.cc/sMVrqt9N/Mam.png',       audio:'p1_mamm.mp3' },
  { id:'papp',     word:'mäi Papp',      img:'https://i.postimg.cc/0z8sFLdH/Papp.png',      audio:'p1_papp.mp3' },
  { id:'schwester',word:'meng Schwëster',img:'https://i.postimg.cc/871S9qmP/Schwester.png', audio:'p1_schwester.mp3' }
];

/* ================= HELPERS ================= */
const speaker=document.getElementById('speaker');

function playAudio(filename){
  if(!filename) return;
  const src = AUDIO_BASE + filename;
  try{
    if(speaker.src !== src) speaker.src = src;
    speaker.play();
  }catch(e){}
}

function shuffle(arr){
  const a=[...arr];
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}
function flash(el, ok=true){
  el.classList.remove('flash-good','flash-bad');
  void el.offsetWidth;
  el.classList.add(ok?'flash-good':'flash-bad');
  setTimeout(()=>el.classList.remove('flash-good','flash-bad'),260);
}

/* ================= NAV ================= */
const pages=['g1','g2','g3','g4'];
let p=0;
document.getElementById('prev').onclick=()=>show(p-1);
document.getElementById('next').onclick=()=>show(p+1);

function show(i){
  p=Math.max(0,Math.min(pages.length-1,i));
  pages.forEach((id,n)=>document.getElementById(id).classList.toggle('hidden',n!==p));
  document.getElementById('flowLabel').textContent=(p+1)+'. Spill';
}
show(0);

/* ================= GAME 1 ================= */
const grid1=document.getElementById('grid1');
let g1bag=[], g1target=null;

function initG1(){
  grid1.innerHTML='';
  ITEMS.forEach(it=>{
    const b=document.createElement('div');
    b.className='imgToken';
    b.innerHTML=`<img src="${it.img}" alt="${it.word}">`;
    b.onclick=()=>{
      if(!g1target) return;
      const ok = it.id===g1target.id;
      flash(b, ok);
      if(ok) setTimeout(nextG1, 280);
    };
    grid1.appendChild(b);
  });
  g1bag=shuffle(ITEMS);
  nextG1();
}
function nextG1(){
  if(g1bag.length===0) g1bag=shuffle(ITEMS);
  g1target=g1bag.pop();
  playAudio(g1target.audio);
}
document.getElementById('play1').onclick=()=>g1target && playAudio(g1target.audio);
initG1();

/* ================= GAME 2: MEMORY ================= */
const memGrid=document.getElementById('memGrid');
const memReset=document.getElementById('memReset');
let memFirst=null, memLock=false;

function buildMemory(){
  memGrid.innerHTML='';
  memFirst=null; memLock=false;

  const base = shuffle(ITEMS).slice(0, Math.min(8, ITEMS.length));
  const deck = shuffle(base.flatMap(it=>[
    {key:it.id, type:'img', it},
    {key:it.id, type:'word', it}
  ]));

  deck.forEach(c=>{
    const card=document.createElement('div');
    card.className='card';
    card.dataset.key=c.key;

    const backContent = (c.type==='img')
      ? `<img src="${c.it.img}" style="width:78%;height:78%;object-fit:contain" alt="">`
      : `<div class="memWord">${c.it.word}</div>`;

    card.innerHTML=`
      <div class="inner">
        <div class="face front"></div>
        <div class="face back">${backContent}</div>
      </div>
    `;
    card.onclick=()=>flipCard(card,c);
    memGrid.appendChild(card);
  });
}

function flipCard(card,c){
  if(memLock) return;
  if(card.classList.contains('matched')) return;
  if(card.classList.contains('flipped')) return;

  card.classList.add('flipped');
  if(c.type==='word') playAudio(c.it.audio);

  if(!memFirst){ memFirst={card,c}; return; }

  memLock=true;
  const isMatch = memFirst.c.key===c.key && memFirst.c.type!==c.type;

  if(isMatch){
    memFirst.card.classList.add('matched');
    card.classList.add('matched');
    memFirst=null;
    memLock=false;
  }else{
    setTimeout(()=>{
      memFirst.card.classList.remove('flipped');
      card.classList.remove('flipped');
      memFirst=null;
      memLock=false;
    },650);
  }
}
memReset.onclick=buildMemory;
buildMemory();

/* ================= GAME 3 ================= */
const bigSq=document.getElementById('bigSq');
const bigImg=document.getElementById('bigImg');
const bigReset=document.getElementById('bigReset');
const sayPlay=document.getElementById('sayPlay');
let g3bag=[], g3current=null;

function refillG3(){ g3bag=shuffle(ITEMS); }
function nextG3(){
  if(g3bag.length===0) refillG3();
  g3current=g3bag.pop();
  bigImg.src=g3current.img;
  bigImg.alt=g3current.word;
  bigImg.classList.remove('fade'); void bigImg.offsetWidth; bigImg.classList.add('fade');
}
function resetG3(){ refillG3(); g3current=null; bigImg.src=''; bigImg.alt=''; }

bigSq.addEventListener('click',(e)=>{ if(e.target!==bigReset) nextG3(); });
bigReset.addEventListener('click',(e)=>{ e.stopPropagation(); resetG3(); });
sayPlay.addEventListener('click',()=>{ if(g3current) playAudio(g3current.audio); });
resetG3();

/* ================= GAME 4 ================= */
const nounSq=document.getElementById('nounSq');
const nounImg=document.getElementById('nounImg');
const nounPlay=document.getElementById('nounPlay');
let g4bag=[], g4current=null;

function refillG4(){ g4bag=shuffle(ITEMS); }
function nextG4(){
  if(g4bag.length===0) refillG4();
  g4current=g4bag.pop();
  nounImg.src=g4current.img;
  nounImg.alt=g4current.word;
  nounImg.classList.remove('fade'); void nounImg.offsetWidth; nounImg.classList.add('fade');
}
refillG4(); nextG4();
nounPlay.onclick=()=>g4current && playAudio(g4current.audio);
nounSq.addEventListener('click',()=>{ if(!g4current) return; playAudio(g4current.audio); setTimeout(nextG4, 900); });
</script>

</body>
</html>
